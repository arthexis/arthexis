{% extends "admin/change_list_base.html" %}

{% block extra_load %}{% load admin_extras favorites %}{% admin_show_filters cl as show_filters %}{% endblock %}

{% block related_models_styles %}
  {% include "admin/includes/related_models_styles.html" %}
{% endblock %}

{% block content_title %}
  {% favorite_ct_id cl.opts.app_label cl.opts.model_name as ct_id %}
  {% favorite_map as favorites_map %}
  {% favorite_from_map favorites_map ct_id as fav %}
  <div class="content-title-with-favorite">
    <h1>{{ title }}</h1>
    {% if ct_id %}
      <a
        href="{% url 'admin:favorite_toggle' ct_id %}?next={{ request.get_full_path|urlencode }}"
        class="favorite-star{% if fav %} favorited{% endif %}"
        title="{% translate 'Toggle favorite' %}"
        aria-label="{% translate 'Toggle favorite' %}"
      >
        &#9733;
      </a>
    {% endif %}
  </div>
{% endblock %}

{% block module_class %}module{% if show_filters %} filtered{% endif %}{% endblock %}

{% block filters %}
  {% if show_filters %}
    <nav id="changelist-filter" aria-labelledby="changelist-filter-header">
      <h2 id="changelist-filter-header">{% translate 'Filter' %}</h2>
      {% if cl.is_facets_optional or cl.has_active_filters %}<div id="changelist-filter-extra-actions">
        {% if cl.is_facets_optional %}<h3>
          {% if cl.add_facets %}<a href="{{ cl.remove_facet_link }}" class="hidelink">{% translate "Hide counts" %}</a>{% else %}<a href="{{ cl.add_facet_link }}" class="viewlink">{% translate "Show counts" %}</a>{% endif %}
        </h3>{% endif %}
        {% if cl.has_active_filters %}<h3>
          <a href="{{ cl.clear_all_filters_qs }}">&#10006; {% translate "Clear all filters" %}</a>
        </h3>{% endif %}
      </div>{% endif %}
      {% for spec in cl.filter_specs %}{% admin_list_filter cl spec %}{% endfor %}
    </nav>
  {% endif %}
{% endblock %}

{% block related_models_section %}
  {% related_admin_models cl.opts as related_models %}
  {% include "admin/includes/related_models_section.html" %}
{% endblock %}

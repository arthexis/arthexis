{% extends "website/base.html" %}
{% load i18n %}

{% block title %}{% trans "AWG Calculator" %}{% endblock %}

{% block content %}
<h1>{% trans "AWG Calculator" %}</h1>
<form method="get" class="row row-cols-lg-auto g-3 align-items-end mb-3">
  <div class="col">
    <label class="form-label" for="awg_size">{% trans "AWG Size" %}</label>
    <select class="form-select" name="awg_size" id="awg_size" required>
      <option value="" disabled {% if not request.GET.awg_size %}selected{% endif %}>{% trans "Select" %}</option>
      {% for val,label in awg_choices %}
      <option value="{{ val }}" {% if val == request.GET.awg_size %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col">
    <label class="form-label" for="material">{% trans "Material" %}</label>
    <select class="form-select" name="material" id="material" required>
      <option value="" disabled {% if not request.GET.material %}selected{% endif %}>{% trans "Select" %}</option>
      {% for val,label in materials %}
      <option value="{{ val }}" {% if val == request.GET.material %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col">
    <label class="form-label" for="line_num">{% trans "Conductors" %}</label>
    <select class="form-select" name="line_num" id="line_num" required>
      <option value="" disabled {% if not request.GET.line_num %}selected{% endif %}>{% trans "Select" %}</option>
      {% for num in line_nums %}
      <option value="{{ num }}" {% if num|stringformat:'s' == request.GET.line_num %}selected{% endif %}>{{ num }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col">
    <button class="btn btn-primary" type="submit">{% trans "Calculate" %}</button>
  </div>
</form>

{% if cable %}
<table class="table table-bordered w-auto">
  <tbody>
    <tr><th>{% trans "Diameter (in)" %}</th><td>{{ cable.dia_in }}</td></tr>
    <tr><th>{% trans "Diameter (mm)" %}</th><td>{{ cable.dia_mm }}</td></tr>
    <tr><th>{% trans "Area (kcmil)" %}</th><td>{{ cable.area_kcmil }}</td></tr>
    <tr><th>{% trans "Area (mm²)" %}</th><td>{{ cable.area_mm2 }}</td></tr>
    <tr><th>{% trans "Resistance (Ω/km)" %}</th><td>{{ cable.k_ohm_km }}</td></tr>
    <tr><th>{% trans "Resistance (Ω/kft)" %}</th><td>{{ cable.k_ohm_kft }}</td></tr>
    <tr><th>{% trans "Ampacity 60°C" %}</th><td>{{ cable.amps_60c }}</td></tr>
    <tr><th>{% trans "Ampacity 75°C" %}</th><td>{{ cable.amps_75c }}</td></tr>
    <tr><th>{% trans "Ampacity 90°C" %}</th><td>{{ cable.amps_90c }}</td></tr>
  </tbody>
</table>

{% if fills %}
<h2>{% trans "Conduit Fill" %}</h2>
<table class="table table-striped w-auto">
  <thead><tr><th>{% trans "Trade Size" %}</th><th>{% trans "Conduit" %}</th><th>{% trans "Max Wires" %}</th></tr></thead>
  <tbody>
  {% for f in fills %}
    <tr><td>{{ f.trade_size }}</td><td>{{ f.conduit }}</td><td>{{ f.value }}</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endif %}
{% elif request.GET %}
<p class="text-danger">{% trans "No data available for selection." %}</p>
{% endif %}
{% endblock %}

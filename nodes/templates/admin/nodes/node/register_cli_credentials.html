{% extends "admin/base_site.html" %}
{% load i18n %}

{% block breadcrumbs %}
{% if has_permission %}
<div class="breadcrumbs">
  <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
  &rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name|capfirst }}</a>
  &rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
  &rsaquo; {% trans "CLI registration token" %}
</div>
{% endif %}
{% endblock %}

{% block content %}
<div id="content-main">
  <p>{% trans "Use this token with the register-node management command on a visiting node to complete the Register Visitor Node workflow without using the admin UI." %}</p>

  <div class="module">
    <h2>{% trans "Temporary credentials" %}</h2>
    <dl>
      <dt>{% trans "Username" %}</dt>
      <dd><code>{{ payload.username }}</code></dd>
      <dt>{% trans "Password" %}</dt>
      <dd><code>{{ payload.password }}</code></dd>
      <dt>{% trans "Expires" %}</dt>
      <dd>{{ expires_at }}</dd>
    </dl>
  </div>

  <div class="module">
    <h2>{% trans "Registration details" %}</h2>
    <p>{% trans "Pass the following token string to the register-node command." %}</p>
    <div class="well" style="word-break: break-all;">{{ encoded }}</div>
    <p>{% trans "The token includes the registration and info endpoints for this host." %}</p>
  </div>
</div>
{% endblock %}

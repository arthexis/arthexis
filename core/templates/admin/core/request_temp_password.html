{% extends "admin/base_site.html" %}
{% load i18n %}

{% block extrastyle %}
  {{ block.super }}
  <style>
    .temp-password-wrapper {
      display: grid;
      gap: 20px;
      max-width: 760px;
    }

    .temp-password-summary {
      background: #f6fbff;
      border: 1px solid #cfe4ff;
      border-radius: 8px;
      padding: 16px 18px;
    }

    .temp-password-summary strong {
      color: #0f4bac;
    }

    .temp-password-grid {
      display: grid;
      gap: 12px;
    }

    .temp-password-field {
      background: #ffffff;
      border: 1px solid #dcdfe6;
      border-radius: 8px;
      display: grid;
      grid-template-columns: 160px 1fr;
      padding: 12px 14px;
      align-items: start;
    }

    .temp-password-field label {
      font-weight: 600;
      color: #4c5561;
      margin: 0;
    }

    .temp-password-field .value {
      color: #0f172a;
      word-break: break-word;
    }

    .temp-password-field code {
      background: #0f172a;
      color: #f8fafc;
      border-radius: 6px;
      padding: 6px 8px;
      display: inline-block;
      font-size: 14px;
      letter-spacing: 0.5px;
    }

    .temp-password-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }

    .temp-password-actions .button.default {
      margin: 0;
    }
  </style>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
  <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a> ›
  <a href="{% url 'admin:password_change' %}">{% trans 'Password change' %}</a> ›
  {% trans 'Temporary password' %}
</div>
{% endblock %}

{% block content %}
<div id="content-main">
  <h1>{{ title }}</h1>

  <div class="temp-password-wrapper">
    <div class="messagelist">
      <div class="success">
        {% blocktrans with username=username %}A new temporary password has been created for {{ username }}.{% endblocktrans %}
      </div>
    </div>

    <div class="temp-password-summary">
      <p>
        <strong>{% trans 'Keep this password secure.' %}</strong>
        {% trans 'Use it immediately to sign in or update your password before it expires.' %}
      </p>
      <p class="help">
        {% trans 'Store the password somewhere safe. If it is lost, generate a new one instead of reusing this code.' %}
      </p>
    </div>

    <div class="module aligned wide">
      <h2>{% trans 'Temporary password details' %}</h2>
      {% if allow_change %}
        <p class="help">
          {% trans 'You can use this temporary password as the old password when changing it.' %}
        </p>
      {% endif %}

      <div class="temp-password-grid">
        <div class="temp-password-field">
          <label>{% trans 'Username' %}</label>
          <div class="value">{{ username }}</div>
        </div>
        <div class="temp-password-field">
          <label>{% trans 'Temporary password' %}</label>
          <div class="value"><code>{{ password }}</code></div>
        </div>
        <div class="temp-password-field">
          <label>{% trans 'Expires at' %}</label>
          <div class="value">{{ expires_at|date:"DATETIME_FORMAT" }}</div>
        </div>
      </div>
    </div>

    <div class="temp-password-actions submit-row">
      <a class="button" href="{{ return_url }}">{% trans 'Return to password change' %}</a>
      <a class="button default" href="{% url 'admin-request-temp-password' %}">{% trans 'Generate another password' %}</a>
    </div>
  </div>
</div>
{% endblock %}

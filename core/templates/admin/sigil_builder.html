{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
<div id="content-main">
  <h1>{{ title }}</h1>
  <form method="post" style="margin-bottom:1em;">
    {% csrf_token %}
    <label for="sigil_input">{% trans "Sigil" %}</label>
    <input type="text" name="sigil" id="sigil_input" value="{{ sigil }}" size="60" />
    <button type="submit">{% trans "Validate" %}</button>
  </form>
  {% if sigil %}
  <p>{% trans "Result" %}: {{ resolved }}</p>
  {% endif %}
  <table>
    <thead>
      <tr><th>{% trans "Prefix" %}</th><th>{% trans "Model" %}</th><th>{% trans "Fields" %}</th></tr>
    </thead>
    <tbody>
    {% for root in sigil_roots %}
      <tr>
        <td>[{{ root.prefix }}]</td>
        <td>{{ root.model }}</td>
        <td>{% for field in root.fields %}{{ field }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
      </tr>
    {% empty %}
      <tr><td colspan="3">{% trans "No Sigil Roots." %}</td></tr>
    {% endfor %}
    </tbody>
  </table>
  <h2 style="margin-top:1em;">{% trans "Auto-resolvable Fields" %}</h2>
  <table>
    <thead>
      <tr><th>{% trans "Model" %}</th><th>{% trans "Field" %}</th></tr>
    </thead>
    <tbody>
    {% for item in auto_fields %}
      <tr>
        <td>{{ item.model }}</td>
        <td>{{ item.field }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="2">{% trans "No auto-resolvable fields." %}</td></tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

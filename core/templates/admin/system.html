{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
<div id="content-main">
  <div style="display:flex; gap:2rem;">
    <div style="flex:0 0 200px;">
      {% if user.is_superuser %}
      <form method="post" style="margin-bottom:1rem;">
        {% csrf_token %}
        {% if info.service %}
          <p>{% trans "This instance is managed by a service daemon. Restart will momentarily stop the service which will be brought back up automatically." %}</p>
          <button class="button" type="submit" name="action" value="restart">{% trans "Restart" %}</button>
        {% endif %}
        <label for="id_password">{% trans "Confirm password" %}</label>
        <input type="password" name="password" id="id_password">
        <button class="button" type="submit" name="action" value="stop">{% trans "Stop Server" %}</button>
      </form>
      <div class="command-list">
        {% for cmd in commands %}
          <p><a class="button" href="{% url 'admin:system_command' cmd %}">{{ cmd }}</a></p>
        {% endfor %}
      </div>
      {% endif %}
    </div>
    <div style="flex:1;">
      <h1>{{ title }}</h1>
      <dl>
        <dt>{% trans "Application installed" %}</dt>
        <dd>{{ info.installed }}</dd>
        <dt>{% trans "Service" %}</dt>
        <dd>{% if info.service %}{{ info.service }}{% else %}{% trans "not installed" %}{% endif %}</dd>
        <dt>{% trans "Nginx mode" %}</dt>
        <dd>{{ info.mode }} ({{ info.port }})</dd>
        <dt>{% trans "Node role" %}</dt>
        <dd>{{ info.role }}</dd>
        {% if info.screen_mode %}
        <dt>{% trans "Display mode" %}</dt>
        <dd>{{ info.screen_mode }}</dd>
        {% endif %}
        <dt>{% trans "Features" %}</dt>
        <dd>
          <ul>
            <li>{% trans "Celery" %}: {{ info.features.celery }}</li>
            <li>{% trans "LCD screen" %}: {{ info.features.lcd_screen }}</li>
            <li>{% trans "Control" %}: {{ info.features.control }}</li>
          </ul>
        </dd>
        <dt>{% trans "Running" %}</dt>
        <dd>{{ info.running }}</dd>
        {% if info.service %}
        <dt>{% trans "Service status" %}</dt>
        <dd>{{ info.service_status }}</dd>
        {% endif %}
        <dt>{% trans "Hostname" %}</dt>
        <dd>{{ info.hostname }}</dd>
        <dt>{% trans "IP addresses" %}</dt>
        <dd>{{ info.ip_addresses|join:" " }}</dd>
      </dl>
    </div>
  </div>
</div>
{% endblock %}

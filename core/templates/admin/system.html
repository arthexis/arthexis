{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
<div id="content-main">
  <h1>{{ title }}</h1>
  <dl>
    <dt>{% trans "Application installed" %}</dt>
    <dd>{{ info.installed }}</dd>
    <dt>{% trans "Service" %}</dt>
    <dd>{% if info.service %}{{ info.service }}{% else %}{% trans "not installed" %}{% endif %}</dd>
    <dt>{% trans "Nginx mode" %}</dt>
    <dd>{{ info.mode }} ({{ info.port }})</dd>
    <dt>{% trans "Node role" %}</dt>
    <dd>{{ info.role }}</dd>
    <dt>{% trans "Features" %}</dt>
    <dd>
      <ul>
        <li>{% trans "Celery" %}: {{ info.features.celery }}</li>
        <li>{% trans "LCD screen" %}: {{ info.features.lcd_screen }}</li>
        <li>{% trans "Control" %}: {{ info.features.control }}</li>
      </ul>
    </dd>
    <dt>{% trans "Running" %}</dt>
    <dd>{{ info.running }}</dd>
    {% if info.service %}
    <dt>{% trans "Service status" %}</dt>
    <dd>{{ info.service_status }}</dd>
    {% endif %}
    <dt>{% trans "Hostname" %}</dt>
    <dd>{{ info.hostname }}</dd>
    <dt>{% trans "IP addresses" %}</dt>
    <dd>{{ info.ip_addresses|join:" " }}</dd>
  </dl>

  {% if user.is_superuser %}
  <form method="post">
    {% csrf_token %}
    {% if info.service %}
      <p>{% trans "This instance is managed by a service daemon. Restart will momentarily stop the service which will be brought back up automatically." %}</p>
      <button class="button" type="submit" name="action" value="restart">{% trans "Restart" %}</button>
      <button class="button" type="submit" name="action" value="stop">{% trans "Stop" %}</button>
    {% else %}
      <button class="button" type="submit" name="action" value="stop">{% trans "Stop" %}</button>
    {% endif %}
  </form>
  {% endif %}
</div>
{% endblock %}

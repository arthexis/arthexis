[
  {
    "model": "core.todo",
    "fields": {
      "request": "Validate auto-upgrade network failure reboot safeguard",
      "url": "",
      "request_details": "On a node with auto-upgrade enabled, simulate a WAN outage (for example, disconnect the uplink or temporarily block outbound HTTPS). Run `python manage.py shell -c \"from core import tasks; tasks.check_github_updates()\"` three times in a row and confirm that `locks/auto_upgrade_network_failures.lck` increments each time. On the third run, verify that `logs/auto-upgrade.log` records the reboot notice and that `sudo systemctl reboot` is invoked only when `locks/charging.lck` is absent. Reconnect the network, rerun the task to confirm the lockfile is removed, then repeat the test with `locks/charging.lck` pre-created (or an active Charge Point session) to ensure the log records the skipped reboot and no restart is attempted.",
      "version": "0.1.28"
    }
  }
]

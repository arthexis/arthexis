[
  {
    "model": "core.todo",
    "fields": {
      "request": "Manual QA: Verify auto-upgrade handoff to watcher systemd unit",
      "created_on": "2025-02-15T00:00:00Z",
      "url": "/admin/system/",
      "request_details": "1. On a systemd deployment confirm `/usr/local/bin/watch-upgrade` is executable and record the service name from `cat locks/service.lck`.\n2. Set `INVOCATION_ID=qa` and trigger the auto-upgrade flow (for example, run `INVOCATION_ID=qa ./manage.py shell -c \"from core.tasks import check_github_updates; check_github_updates()\"` on a node with a pending update).\n3. Tail `logs/auto-upgrade.log` and confirm it records delegation to a transient watcher unit (e.g., `upgrade-watcher-...`).\n4. Run `systemctl status <UNIT>` and `journalctl -u <UNIT>` using the recorded unit name to verify the watcher service ran the upgrade script and restarted the managed service.\n5. After the watcher finishes, confirm `systemctl status ${SERVICE}` reports `active` and `./status.sh` shows the node healthy.",
      "done_on": null,
      "is_deleted": false,
      "version": "0.1.33"
    }
  }
]

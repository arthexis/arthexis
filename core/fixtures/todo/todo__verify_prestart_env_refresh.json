[
  {
    "model": "core.todo",
    "fields": {
      "request": "Manual QA: Confirm systemd prestart refresh recovers suite after auto-upgrade",
      "created_on": "2025-11-16T00:00:00Z",
      "url": "/admin/system/",
      "request_details": "1. Record the service name from `cat locks/service.lck` on a node using systemd.\n2. Inspect `/etc/systemd/system/${SERVICE}.service` and confirm it includes `ExecStartPre=${BASE_DIR}/scripts/prestart-refresh.sh`.\n3. Trigger an auto-upgrade run (for example with `python manage.py check_github_updates`) and immediately kill the service with `sudo systemctl kill --signal=TERM ${SERVICE}`.\n4. Wait for systemd to restart the service and review `logs/env-refresh.sh.log` to confirm the prestart refresh executed without creating a new failover branch.\n5. Verify `sudo systemctl status ${SERVICE}` reports ActiveState=active and `./status.sh` shows the suite healthy after the restart.\n6. Repeat steps 3-5 for `celery-${SERVICE}` and `celery-beat-${SERVICE}` if Celery is enabled.",
      "done_on": null,
      "is_deleted": false,
      "version": "0.1.33"
    }
  }
]
